{% extends "base.html" %}

{% block title %}Home - Japanese Learning App{% endblock %}

{% block content %}
<div class="row">
    <div class="col-md-8">
        <div class="jumbotron bg-primary text-white p-5 rounded mb-4">
            <h1 class="display-4">ğŸ‡¯ğŸ‡µ Japanese Learning App</h1>
            <p class="lead">AI-powered spaced repetition learning system</p>
            <hr class="my-4">
            <p>Learn Japanese efficiently with intelligent exercises and personalized feedback.</p>
            {% if has_cards_due %}
                <a class="btn btn-success btn-lg" href="{{ url_for('study_session') }}" role="button">
                    ğŸ“š Start Study Session
                </a>
            {% else %}
                <p class="text-light">âœ… All caught up! No cards due for review.</p>
                <a class="btn btn-outline-light" href="{{ url_for('add_content') }}" role="button">
                    â• Add Content
                </a>
            {% endif %}
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“š Study</h5>
                        <p class="card-text">Review your cards with AI-generated exercises</p>
                        <a href="{{ url_for('study_session') }}" class="btn btn-primary">Start Studying</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">â• Add Content</h5>
                        <p class="card-text">Add vocabulary, kanji, grammar, and more</p>
                        <a href="{{ url_for('add_content') }}" class="btn btn-secondary">Add Content</a>
                    </div>
                </div>
            </div>
        </div>

        <div class="row">
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ–¼ï¸ Process Images</h5>
                        <p class="card-text">Extract Japanese content from images using AI</p>
                        <a href="{{ url_for('process_image') }}" class="btn btn-info">Process Image</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“ Verb Conjugations</h5>
                        <p class="card-text">Study Japanese verb conjugations interactively</p>
                        <a href="{{ url_for('view_conjugations') }}" class="btn btn-warning">Study Conjugations</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4 border-info">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“– Bunpro Grammar</h5>
                        <p class="card-text">Learn 928 grammar points with multiple-choice quizzes</p>
                        <a href="{{ url_for('bunpro_study') }}" class="btn btn-info">Study Grammar</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4 border-warning">
                    <div class="card-body">
                        <h5 class="card-title">æ¼¢ Top Kanji</h5>
                        <p class="card-text">Learn 10,000+ kanji by frequency with multiple-choice quizzes</p>
                        <a href="{{ url_for('kanji_study') }}" class="btn btn-warning">Study Kanji</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4 border-primary">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“ Top Words</h5>
                        <p class="card-text">Learn 10,000 most frequent Japanese words with quizzes</p>
                        <a href="{{ url_for('words_study') }}" class="btn btn-primary">Study Words</a>
                    </div>
                </div>
            </div>
            <div class="col-md-6">
                <div class="card mb-4">
                    <div class="card-body">
                        <h5 class="card-title">ğŸ“Š Progress</h5>
                        <p class="card-text">View your learning progress and statistics</p>
                        <a href="{{ url_for('view_progress') }}" class="btn btn-success">View Progress</a>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <div class="col-md-4">
        <div class="card">
            <div class="card-header">
                <h5 class="mb-0">ğŸ“Š Your Progress</h5>
            </div>
            <div class="card-body">
                {% if progress %}
                    <p><strong>User:</strong> {{ username }}</p>
                    <p><strong>Total Reviews:</strong> {{ progress.total_reviews }}</p>
                    <p><strong>Correct Answers:</strong> {{ progress.correct_answers }}</p>
                    {% set accuracy = (progress.correct_answers / progress.total_reviews * 100) if progress.total_reviews > 0 else 0 %}
                    <p><strong>Accuracy:</strong> 
                        <span class="badge bg-{{ 'success' if accuracy >= 80 else ('warning' if accuracy >= 60 else 'danger') }}">
                            {{ "%.1f"|format(accuracy) }}%
                        </span>
                    </p>
                    <p><strong>Last Updated:</strong><br>
                        <small class="text-muted">{{ progress.last_updated.strftime('%Y-%m-%d %H:%M') }}</small>
                    </p>
                {% else %}
                    <p class="text-muted">No progress data yet.</p>
                    <p>Start studying to track your progress!</p>
                {% endif %}
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">ğŸ¤– AI Features</h5>
            </div>
            <div class="card-body">
                <ul class="list-unstyled">
                    <li>âœ… Dynamic exercise generation</li>
                    <li>âœ… Semantic answer evaluation</li>
                    <li>âœ… Intelligent feedback</li>
                    <li>âœ… Image content extraction</li>
                    <li>âœ… Spaced repetition scheduling</li>
                </ul>
                <a href="{{ url_for('ai_status') }}" class="btn btn-outline-primary btn-sm">AI Status</a>
            </div>
        </div>

        <div class="card mt-3">
            <div class="card-header">
                <h5 class="mb-0">âš™ï¸ Quick Actions</h5>
            </div>
            <div class="card-body">
                <div class="d-grid gap-2">
                    <a href="{{ url_for('settings') }}" class="btn btn-outline-secondary btn-sm">Settings</a>
                    <a href="{{ url_for('manual_review') }}" class="btn btn-outline-secondary btn-sm">Manual Review</a>
                    <a href="{{ url_for('save_message') }}" class="btn btn-outline-secondary btn-sm">Save Message</a>
                </div>
            </div>
        </div>
    </div>
</div>
{% endblock %}